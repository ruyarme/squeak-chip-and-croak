<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Squeak, Chip, and Croak's Alien Adventure</title>
  <style>
    body { font-family: Arial, sans-serif; }
    canvas { display: block; margin: 0 auto; background-color: #f0f0f0; }
    #game-info { text-align: center; margin-top: 20px; font-size: 18px; }
  </style>
</head>
<body>

  <h1 align="center">Squeak, Chip, and Croak's Alien Adventure</h1>
  <canvas id="gameCanvas" width="800" height="600"></canvas>
  <div id="game-info">Press arrow keys to move the characters!</div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // Player Object
    let player = {
      x: 100,
      y: 100,
      width: 50,
      height: 50,
      color: 'gray',  // Default color for Squeak
      speed: 5,
      name: "Squeak",  // Starting character
    };

    // Science facts
    const scienceFacts = [
      "The alien forest plants use a unique process of photosynthesis that works with UV light!",
      "The crystal caverns are made of rare minerals that can glow in the dark!",
      "Water here behaves differently in zero gravity, creating floating bubbles!",
      "Stars on this planet have much stronger gravitational fields, affecting time perception!"
    ];

    // Variables to control the scrolling speed and positioning of the fact
    let factYPosition = canvas.height - 50;  // Initial position of the fact
    let factSpeed = 0.001;  // Slower speed for better readability

    // Display science facts that stay on the screen for longer
    function displayFact(fact) {
      ctx.fillStyle = 'black';  // Text color
      ctx.font = '16px Arial';  // Font style
      ctx.fillText("Current Character: " + player.name, 20, 30);  // Display character name
      ctx.fillText(fact, 20, factYPosition);  // Display the science fact at current position

      // Move the fact upwards, but keep it in view
      factYPosition -= factSpeed;

      // Reset position when the fact goes off the screen
      if (factYPosition < 0) {
        factYPosition = canvas.height - 50;  // Reset to the bottom
      }
    }

    // Function to update character's appearance based on the character name
    function setCharacterAppearance() {
      if (player.name === "Squeak") {
        player.color = 'gray';  // Mouse character (Squeak)
      } else if (player.name === "Chip") {
        player.color = 'brown';  // Chipmunk character (Chip)
      } else if (player.name === "Croak") {
        player.color = 'green';  // Frog character (Croak)
      }
    }

    // Function to draw the player on the canvas
    function drawPlayer() {
      ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear canvas before drawing the next frame
      ctx.fillStyle = player.color;  // Use character's color
      ctx.fillRect(player.x, player.y, player.width, player.height);  // Draw player as a rectangle

      // Display a science fact when the player is near the top of the screen
      if (player.y < 50) {
        displayFact(scienceFacts[Math.floor(Math.random() * scienceFacts.length)]);
      }
    }

    // Movement function to keep the player on screen
    function movePlayer(direction) {
      if (direction === 'left' && player.x > 0) player.x -= player.speed;  // Prevent going off the left
      if (direction === 'right' && player.x + player.width < canvas.width) player.x += player.speed;  // Prevent going off the right
      if (direction === 'up' && player.y > 0) player.y -= player.speed;  // Prevent going off the top
      if (direction === 'down' && player.y + player.height < canvas.height) player.y += player.speed;  // Prevent going off the bottom
    }

    // Event listener for keydown (for movement)
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') movePlayer('left');
      if (e.key === 'ArrowRight') movePlayer('right');
      if (e.key === 'ArrowUp') movePlayer('up');
      if (e.key === 'ArrowDown') movePlayer('down');

      drawPlayer();  // Redraw the player after movement
      setCharacterAppearance();  // Update the player's appearance
    });

    // Obstacles Code
    let obstacles = [];

    // Function to create obstacles (appear randomly from the top)
    function createObstacle() {
      let obstacle = {
        x: Math.random() * canvas.width,  // Random horizontal position
        y: 0,  // Start from the top
        width: 50,
        height: 50,
        color: 'red',
        speed: 2  // Obstacles fall down at this speed
      };
      obstacles.push(obstacle);
    }

    // Function to move and draw obstacles
    function moveObstacles() {
      for (let i = 0; i < obstacles.length; i++) {
        obstacles[i].y += obstacles[i].speed;  // Move the obstacle down

        ctx.fillStyle = obstacles[i].color;
        ctx.fillRect(obstacles[i].x, obstacles[i].y, obstacles[i].width, obstacles[i].height);

        // Check for collision with the player
        if (player.x < obstacles[i].x + obstacles[i].width &&
            player.x + player.width > obstacles[i].x &&
            player.y < obstacles[i].y + obstacles[i].height &&
            player.y + player.height > obstacles[i].y) {
          alert("You hit an obstacle! Try again.");
          resetGame();  // Reset the game if collision happens
        }
      }
    }

    // Function to periodically create obstacles
    setInterval(createObstacle, 2000);  // Every 2 seconds

    // Function to reset the game
    function resetGame() {
      player.x = 100;
      player.y = 100;
      obstacles = [];  // Remove obstacles after reset
    }

    // Main game loop
    function gameLoop() {
      drawPlayer();  // Draw the player on the canvas
      moveObstacles();  // Move and display obstacles
      requestAnimationFrame(gameLoop);  // Keep the game running
    }

    gameLoop();  // Start the game loop
  </script>

</body>
</html>
